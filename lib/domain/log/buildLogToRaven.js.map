{"version":3,"sources":["domain/log/buildLogToRaven.js"],"names":["buildLogToRaven","level","length","Error","captureException","captureMessage","buildErrorMessage","captureBreadcrumb","message","args","parsedArgs","map","item","stack","test","join"],"mappings":";;;;;kBAGwBA,e;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,eAAT,CAAyBC,KAAzB,EAAgC;AAC7C,MAAIA,UAAU,OAAd,EAAuB;AACrB,WAAO,YAAa;AAClB,UAAI,UAAKC,MAAL,KAAgB,CAAhB,IAAqB,8DAAmBC,KAA5C,EAAmD;AACjD,eAAO,kBAAMC,gBAAN,mDAAgC,EAAEH,YAAF,EAAhC,CAAP;AACD;;AAED,aAAO,kBAAMI,cAAN,CAAqBC,6CAArB,EAAiD,EAAEL,YAAF,EAAjD,CAAP;AACD,KAND;AAOD;;AAED,SAAO;AAAA,WAAa,kBAAMM,iBAAN,CAAwB;AAC1CC,eAASF,6CADiC;AAE1CL,aAAOA,UAAU,MAAV,GAAmBA,KAAnB,GAA2B;AAFQ,KAAxB,CAAb;AAAA,GAAP;AAID;;AAED,SAASK,iBAAT,GAAoC;AAAA,oCAANG,IAAM;AAANA,QAAM;AAAA;;AAClC,MAAMC,aAAaD,KAAKE,GAAL,CAAS,UAACC,IAAD;AAAA,WAAWA,gBAAgBT,KAAhB,GAAwBS,KAAKC,KAA7B,GAAqCD,IAAhD;AAAA,GAAT,CAAnB;AACA,MAAI,wBAAwBE,IAAxB,CAA6BL,KAAK,CAAL,CAA7B,CAAJ,EAA2C;AACzC,WAAO,uDAAWC,UAAX,EAAP;AACD;;AAED,SAAOA,WAAWK,IAAX,CAAgB,GAAhB,CAAP;AACD","file":"buildLogToRaven.js","sourcesContent":["import Raven from 'raven-js';\nimport { sprintf } from 'sprintf-js';\n\nexport default function buildLogToRaven(level) {\n  if (level === 'error') {\n    return (...args) => {\n      if (args.length === 1 && args[0] instanceof Error) {\n        return Raven.captureException(args[0], { level });\n      }\n\n      return Raven.captureMessage(buildErrorMessage(...args), { level });\n    };\n  }\n\n  return (...args) => Raven.captureBreadcrumb({\n    message: buildErrorMessage(...args),\n    level: level === 'warn' ? level : 'info',\n  });\n}\n\nfunction buildErrorMessage(...args) {\n  const parsedArgs = args.map((item) => (item instanceof Error ? item.stack : item));\n  if (/%[bcdieufgosxXj]( |$)/.test(args[0])) {\n    return sprintf(...parsedArgs);\n  }\n\n  return parsedArgs.join(' ');\n}\n"]}