{"version":3,"sources":["domain/ApiResponseHelper/index.js"],"names":["isApiResponse","apiResponse","object","isLoading","loading","hasFailed","error","Error","hasSucceeded","not","undefined","data","fetchWasCalled","shouldFetch","create","Object","keys","length","key","responsify","ApiResponseHelper"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,gBAAgB,SAAhBA,aAAgB,CAACC,WAAD;AAAA,SAAiB,gBAAGC,MAAH,CAAUD,WAAV,KACnCA,+CADkB;AAAA,CAAtB;;AAGA,IAAME,YAAY,SAAZA,SAAY,CAACF,WAAD;AAAA,SAAiBD,cAAcC,WAAd,KAA8BA,YAAYG,OAAZ,KAAwB,IAAvE;AAAA,CAAlB;;AAEA,IAAMC,YAAY,SAAZA,SAAY,CAACJ,WAAD;AAAA,SAAiBD,cAAcC,WAAd,KAC/BA,YAAYK,KAAZ,YAA6BC,KADf;AAAA,CAAlB;;AAGA,IAAMC,eAAe,SAAfA,YAAe,CAACP,WAAD;AAAA,SAAiBD,cAAcC,WAAd,KAClC,gBAAGQ,GAAH,CAAOC,SAAP,CAAiBT,YAAYU,IAA7B,CADiB;AAAA,CAArB;;AAGA,IAAMC,iBAAiB,SAAjBA,cAAiB,CAACX,WAAD;AAAA,SAAiBE,UAAUF,WAAV,KACpCI,UAAUJ,WAAV,CADoC,IAEpCO,aAAaP,WAAb,CAFmB;AAAA,CAAvB;;AAIA,IAAMY,cAAc,SAAdA,WAAc,CAACZ,WAAD;AAAA,SAAiB,CAAEW,eAAeX,WAAf,CAAnB;AAAA,CAApB;;AAEA,IAAMa,SAAS,SAATA,MAAS,CAACb,WAAD,EAAiB;AAC9B,MAAIA,+CAAJ,EAAwC;AACtC,WAAOA,WAAP;AACD;;AAED,MAAIA,uBAAuBM,KAA3B,EAAkC;AAChC,WAAO,6BAAgB,EAAED,OAAOL,WAAT,EAAhB,CAAP;AACD;;AAED,MAAI,gBAAGS,SAAH,CAAaT,WAAb,CAAJ,EAA+B;AAC7B,WAAO,8BAAP;AACD;;AAED,MAAI,gBAAGC,MAAH,CAAUD,WAAV,KAA0Bc,OAAOC,IAAP,CAAYf,WAAZ,EAAyBgB,MAAzB,KAAoC,CAAlE,EAAqE;AACnE,QAAMC,MAAMH,OAAOC,IAAP,CAAYf,WAAZ,EAAyB,CAAzB,CAAZ;AACA,QAAIiB,QAAQ,SAAZ,EAAuB;AACrB,aAAO,6BAAgB,EAAEd,SAASH,YAAYG,OAAZ,KAAwB,IAAnC,EAAhB,CAAP;AACD;;AAED,QAAIc,QAAQ,OAAZ,EAAqB;AACnB,UAAI,gBAAGR,SAAH,CAAaT,YAAYK,KAAzB,KAAmCL,YAAYK,KAAZ,YAA6BC,KAApE,EAA2E;AACzE,eAAO,6BAAgB,EAAED,OAAOL,YAAYK,KAArB,EAAhB,CAAP;AACD;;AAED,aAAO,6BAAgB,EAAEA,OAAO,IAAIC,KAAJ,CAAUN,YAAYK,KAAtB,CAAT,EAAhB,CAAP;AACD;;AAED,QAAIY,QAAQ,MAAZ,EAAoB;AAClB,aAAO,6BAAgB,EAAEP,MAAMV,YAAYU,IAApB,EAAhB,CAAP;AACD;AACF;;AAED,SAAO,6BAAgB,EAAEA,MAAMV,WAAR,EAAhB,CAAP;AACD,CAjCD;;AAmCA,IAAMkB,aAAaL,MAAnB;;AAEO,IAAMM,gDAAoB;AAC/BP,0BAD+B;AAE/BD,gCAF+B;AAG/BT,sBAH+B;AAI/BE,sBAJ+B;AAK/BG,4BAL+B;AAM/BM,gBAN+B;AAO/BK;AAP+B,CAA1B;;kBAUQC,iB","file":"index.js","sourcesContent":["import { ApiResponse } from 'domain/ApiResponse';\nimport is from 'is_js';\n\nconst isApiResponse = (apiResponse) => is.object(apiResponse) &&\n    apiResponse instanceof ApiResponse;\n\nconst isLoading = (apiResponse) => isApiResponse(apiResponse) && apiResponse.loading === true;\n\nconst hasFailed = (apiResponse) => isApiResponse(apiResponse) &&\n    apiResponse.error instanceof Error;\n\nconst hasSucceeded = (apiResponse) => isApiResponse(apiResponse) &&\n    is.not.undefined(apiResponse.data);\n\nconst fetchWasCalled = (apiResponse) => isLoading(apiResponse) ||\n    hasFailed(apiResponse) ||\n    hasSucceeded(apiResponse);\n\nconst shouldFetch = (apiResponse) => ! fetchWasCalled(apiResponse);\n\nconst create = (apiResponse) => {\n  if (apiResponse instanceof ApiResponse) {\n    return apiResponse;\n  }\n\n  if (apiResponse instanceof Error) {\n    return new ApiResponse({ error: apiResponse });\n  }\n\n  if (is.undefined(apiResponse)) {\n    return new ApiResponse();\n  }\n\n  if (is.object(apiResponse) && Object.keys(apiResponse).length === 1) {\n    const key = Object.keys(apiResponse)[0];\n    if (key === 'loading') {\n      return new ApiResponse({ loading: apiResponse.loading === true });\n    }\n\n    if (key === 'error') {\n      if (is.undefined(apiResponse.error) || apiResponse.error instanceof Error) {\n        return new ApiResponse({ error: apiResponse.error });\n      }\n\n      return new ApiResponse({ error: new Error(apiResponse.error) });\n    }\n\n    if (key === 'data') {\n      return new ApiResponse({ data: apiResponse.data });\n    }\n  }\n\n  return new ApiResponse({ data: apiResponse });\n};\n\nconst responsify = create;\n\nexport const ApiResponseHelper = {\n  shouldFetch,\n  fetchWasCalled,\n  isLoading,\n  hasFailed,\n  hasSucceeded,\n  create,\n  responsify,\n};\n\nexport default ApiResponseHelper;\n"]}