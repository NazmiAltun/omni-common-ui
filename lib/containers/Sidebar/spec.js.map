{"version":3,"sources":["containers/Sidebar/spec.jsx"],"names":["props","beforeEach","location","pathname","routes","sidebar","text","onExpand","jest","fn","onCollapse","test","expect","html","toBe","find","Sidebar_expanded","toHaveLength","wrapper","simulate","toHaveBeenCalled","describe","mountAndClick","expanded","items","Sidebar_item","at","document","body","dispatchEvent","Event","push","undefined","order"],"mappings":"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","file":"spec.js","sourcesContent":["import styles from './style.postcss';\n\nimport React from 'react';\nimport { shallow, mount } from 'enzyme';\nimport Sidebar from './';\n\nlet props;\n\nbeforeEach(() => {\n  props = {\n    location: { pathname: '/current/path' },\n    routes: [\n      {\n        sidebar: {\n          '/link/1': { text: 'Link 1' },\n          '/link/2': { text: 'Link 2' },\n          '/current/path': { text: 'Current path' },\n        },\n      },\n    ],\n    onExpand: jest.fn(),\n    onCollapse: jest.fn(),\n  };\n});\n\ntest('renders nothing if no items available', () => {\n  expect(shallow(<Sidebar />).html()).toBe(null);\n});\n\ntest('renders collapsed view by default', () => {\n  expect(mount(<Sidebar {...props} />).find(`.${styles.Sidebar_expanded}`)).toHaveLength(0);\n});\n\ntest('calls onExpand when clicking on it', () => {\n  const wrapper = mount(<Sidebar {...props} />);\n  wrapper.simulate('click');\n  expect(props.onExpand).toHaveBeenCalled();\n});\n\ndescribe('when expanded', () => {\n  const mountAndClick = () => {\n    const wrapper = mount(<Sidebar {...props} />);\n    wrapper.simulate('click');\n    return wrapper;\n  };\n\n  beforeEach(() => {\n    props.expanded = true;\n  });\n\n  test('renders as expanded', () => {\n    const wrapper = mount(<Sidebar {...props} />);\n    expect(wrapper.find(`.${styles.Sidebar_expanded}`)).toHaveLength(1);\n  });\n\n  test('renders items', () => {\n    const wrapper = mountAndClick();\n    const items = wrapper.find(`.${styles.Sidebar_item}`);\n    expect(items).toHaveLength(3);\n    expect(items.at(0).text()).toBe('Link 1');\n    expect(items.at(1).text()).toBe('Link 2');\n    expect(items.at(2).text()).toBe('Current path');\n  });\n\n  test('calls onCollapse if the user clicks outside', () => {\n    mountAndClick();\n    document.body.dispatchEvent(new Event('click'));\n    expect(props.onCollapse).toHaveBeenCalled();\n  });\n\n  test('calls onCollapse if the user taps outside', () => {\n    mountAndClick();\n    document.body.dispatchEvent(new Event('touchstart'));\n    expect(props.onCollapse).toHaveBeenCalled();\n  });\n\n  test('allows deeper routes to override configuration', () => {\n    props.routes.push({ sidebar: { '/link/1': { text: 'My link' } } });\n    const wrapper = mountAndClick();\n    const items = wrapper.find(`.${styles.Sidebar_item}`);\n    expect(items).toHaveLength(3);\n    expect(items.at(0).text()).toBe('My link');\n  });\n\n  test('allows deeper routes to remove an item', () => {\n    props.routes.push({ sidebar: { '/link/1': undefined } });\n    const wrapper = mountAndClick();\n    const items = wrapper.find(`.${styles.Sidebar_item}`);\n    expect(items).toHaveLength(2);\n    expect(items.at(0).text()).toBe('Link 2');\n  });\n\n  test('renders items according to their order property', () => {\n    props.routes[0].sidebar['/link/1'].order = 3;\n    props.routes[0].sidebar['/link/2'].order = 1;\n    props.routes[0].sidebar['/current/path'].order = 2;\n    const wrapper = mountAndClick();\n    const items = wrapper.find(`.${styles.Sidebar_item}`);\n    expect(items).toHaveLength(3);\n    expect(items.at(0).text()).toBe('Link 2');\n    expect(items.at(1).text()).toBe('Current path');\n    expect(items.at(2).text()).toBe('Link 1');\n  });\n});\n"]}