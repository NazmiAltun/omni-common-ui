{"version":3,"sources":["containers/Sidebar/spec.jsx"],"names":["describe","props","onExpand","onCollapse","beforeEach","spy","location","pathname","routes","sidebar","text","it","to","be","empty","not","have","descendants","Sidebar_expanded","wrapper","simulate","called","true","context","mountAndClick","expanded","items","find","Sidebar_item","length","at","document","body","dispatchEvent","Event","push","undefined","order"],"mappings":"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","file":"spec.js","sourcesContent":["import styles from './style.postcss';\n\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow, mount } from 'enzyme';\nimport Sidebar from './';\nimport Sinon from 'sinon';\n\ndescribe('<Sidebar />', () => {\n  let props;\n  let onExpand;\n  let onCollapse;\n\n  beforeEach(() => {\n    onExpand = Sinon.spy();\n    onCollapse = Sinon.spy();\n    props = {\n      location: { pathname: '/current/path' },\n      routes: [\n        {\n          sidebar: {\n            '/link/1': { text: 'Link 1' },\n            '/link/2': { text: 'Link 2' },\n            '/current/path': { text: 'Current path' },\n          },\n        },\n      ],\n      onExpand,\n      onCollapse,\n    };\n  });\n\n  it('renders nothing if no items available', () => {\n    expect(shallow(<Sidebar />)).to.be.empty;\n  });\n\n  it('renders collapsed view by default', () => {\n    expect(mount(<Sidebar {...props} />)).to.not.have.descendants(`.${styles.Sidebar_expanded}`);\n  });\n\n  it('calls onExpand when clicking on it', () => {\n    const wrapper = mount(<Sidebar {...props} />);\n    wrapper.simulate('click');\n    expect(onExpand.called).to.be.true;\n  });\n\n  context('when expanded', () => {\n    const mountAndClick = () => {\n      const wrapper = mount(<Sidebar {...props} />);\n      wrapper.simulate('click');\n      return wrapper;\n    };\n\n    beforeEach(() => {\n      props.expanded = true;\n    });\n\n    it('renders as expanded', () => {\n      const wrapper = mount(<Sidebar {...props} />);\n      expect(wrapper).to.have.descendants(`.${styles.Sidebar_expanded}`);\n    });\n\n    it('renders items', () => {\n      const wrapper = mountAndClick();\n      const items = wrapper.find(`.${styles.Sidebar_item}`);\n      expect(items).to.have.length(3);\n      expect(items.at(0)).to.have.text('Link 1');\n      expect(items.at(1)).to.have.text('Link 2');\n      expect(items.at(2)).to.have.text('Current path');\n    });\n\n    it('calls onCollapse if the user clicks outside', () => {\n      mountAndClick();\n      document.body.dispatchEvent(new Event('click'));\n      expect(onCollapse.called).to.be.true;\n    });\n\n    it('calls onCollapse if the user taps outside', () => {\n      mountAndClick();\n      document.body.dispatchEvent(new Event('touchstart'));\n      expect(onCollapse.called).to.be.true;\n    });\n\n    it('allows deeper routes to override configuration', () => {\n      props.routes.push({ sidebar: { '/link/1': { text: 'My link' } } });\n      const wrapper = mountAndClick();\n      const items = wrapper.find(`.${styles.Sidebar_item}`);\n      expect(items).to.have.length(3);\n      expect(items.at(0)).to.have.text('My link');\n    });\n\n    it('allows deeper routes to remove an item', () => {\n      props.routes.push({ sidebar: { '/link/1': undefined } });\n      const wrapper = mountAndClick();\n      const items = wrapper.find(`.${styles.Sidebar_item}`);\n      expect(items).to.have.length(2);\n      expect(items.at(0)).to.have.text('Link 2');\n    });\n\n    it('renders items according to their order property', () => {\n      props.routes[0].sidebar['/link/1'].order = 3;\n      props.routes[0].sidebar['/link/2'].order = 1;\n      props.routes[0].sidebar['/current/path'].order = 2;\n      const wrapper = mountAndClick();\n      const items = wrapper.find(`.${styles.Sidebar_item}`);\n      expect(items).to.have.length(3);\n      expect(items.at(0)).to.have.text('Link 2');\n      expect(items.at(1)).to.have.text('Current path');\n      expect(items.at(2)).to.have.text('Link 1');\n    });\n  });\n});\n"]}