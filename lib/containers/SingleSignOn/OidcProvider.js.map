{"version":3,"sources":["containers/SingleSignOn/OidcProvider.js"],"names":["OidcProvider","props","userManager","_onUserLoaded","bind","_onSilentRenewError","_onAccessTokenExpired","_onUserUnloaded","_onAccessTokenExpiring","_onUserSignedOut","events","addUserLoaded","addSilentRenewError","addAccessTokenExpired","addAccessTokenExpiring","addUserUnloaded","addUserSignedOut","removeUserLoaded","removeSilentRenewError","removeAccessTokenExpired","removeAccessTokenExpiring","removeUserUnloaded","removeUserSignedOut","user","store","dispatch","error","Children","only","children","propTypes","object","isRequired","node"],"mappings":"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","file":"OidcProvider.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  userExpired,\n  userFound,\n  silentRenewError,\n  sessionTerminated,\n  userExpiring,\n  userSignedOut,\n} from 'data/SingleSignOn/actions';\n\nclass OidcProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.userManager = props.userManager;\n    this._onUserLoaded = this._onUserLoaded.bind(this);\n    this._onSilentRenewError = this._onSilentRenewError.bind(this);\n    this._onAccessTokenExpired = this._onAccessTokenExpired.bind(this);\n    this._onUserUnloaded = this._onUserUnloaded.bind(this);\n    this._onAccessTokenExpiring = this._onAccessTokenExpiring.bind(this);\n    this._onAccessTokenExpired = this._onAccessTokenExpired.bind(this);\n    this._onUserSignedOut = this._onUserSignedOut.bind(this);\n  }\n\n  componentWillMount() {\n    // register the event callbacks\n    this.userManager.events.addUserLoaded(this._onUserLoaded);\n    this.userManager.events.addSilentRenewError(this._onSilentRenewError);\n    this.userManager.events.addAccessTokenExpired(this._onAccessTokenExpired);\n    this.userManager.events.addAccessTokenExpiring(this._onAccessTokenExpiring);\n    this.userManager.events.addUserUnloaded(this._onUserUnloaded);\n    this.userManager.events.addUserSignedOut(this._onUserSignedOut);\n  }\n\n  componentWillUnmount() {\n    // unregister the event callbacks\n    this.userManager.events.removeUserLoaded(this._onUserLoaded);\n    this.userManager.events.removeSilentRenewError(this._onSilentRenewError);\n    this.userManager.events.removeAccessTokenExpired(this._onAccessTokenExpired);\n    this.userManager.events.removeAccessTokenExpiring(this._onAccessTokenExpiring);\n    this.userManager.events.removeUserUnloaded(this._onUserUnloaded);\n    this.userManager.events.removeUserSignedOut(this._onUserSignedOut);\n  }\n\n  // event callback when the user has been loaded (on silent renew or redirect)\n  _onUserLoaded(user) {\n    this.props.store.dispatch(userFound(user));\n  }\n\n  // event callback when silent renew errored\n  _onSilentRenewError(error) {\n    this.props.store.dispatch(silentRenewError(error));\n  }\n\n  // event callback when the access token expired\n  _onAccessTokenExpired() {\n    this.props.store.dispatch(userExpired());\n  }\n\n  // event callback when the user is logged out\n  _onUserUnloaded() {\n    this.props.store.dispatch(sessionTerminated());\n  }\n\n  // event callback when the user is expiring\n  _onAccessTokenExpiring() {\n    this.props.store.dispatch(userExpiring());\n  }\n\n  // event callback when the user is signed out\n  _onUserSignedOut() {\n    this.props.store.dispatch(userSignedOut());\n  }\n\n  render() {\n    return React.Children.only(this.props.children);\n  }\n}\n\nOidcProvider.propTypes = {\n  userManager: PropTypes.object.isRequired,\n  store: PropTypes.object.isRequired,\n  children: PropTypes.node,\n};\n\nexport default OidcProvider;\n"]}