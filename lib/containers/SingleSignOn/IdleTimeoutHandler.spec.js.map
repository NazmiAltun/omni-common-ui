{"version":3,"sources":["containers/SingleSignOn/IdleTimeoutHandler.spec.jsx"],"names":["describe","IdleTimeoutHandler","signoutRedirect","requireComponent","Config","require","merge","default","mountComponent","beforeEach","stub","returns","autoSignOutTimeout","afterEach","restore","context","it","test","done","timeout","setTimeout","called","to","be","false","wrapper","have","descendants","true","window","document","dispatchEvent","Event"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AACA;;AACA;;;;AACA;;;;;;AAEAA,SAAS,wBAAT,EAAmC,YAAM;AACvC,MAAIC,2BAAJ;AACA,MAAIC,wBAAJ;;AAEA;AACA,MAAMC,mBAAmB,SAAnBA,gBAAmB,CAACC,MAAD;AAAA,WAAYC,QAAQ,yDAAR,EAAmE;AACtG,uBAAiB,iBAAQC,KAAR,CAAcF,MAAd,CADqF;AAEtG;AAFsG,KAAnE,EAGlCG,OAHsB;AAAA,GAAzB;;AAKA,MAAMC,iBAAiB,SAAjBA,cAAiB;AAAA,WAAM,mBAAM;AAAC,wBAAD;AAAA;AAAoB,6CAAK,IAAG,OAAR;AAApB,KAAN,CAAN;AAAA,GAAvB;;AAEAC,aAAW,YAAM;AACfP,sBAAkB,gBAAMQ,IAAN,wBAAwB,iBAAxB,CAAlB;AACAR,oBAAgBS,OAAhB;AACAV,yBAAqBE,iBAAiB,EAAES,oBAAoB,KAAtB,EAAjB,CAArB;AACD,GAJD;;AAMAC,YAAU,YAAM;AACdX,oBAAgBY,OAAhB;AACD,GAFD;;AAIAC,UAAQ,kCAAR,EAA4C,YAAM;AAChDC,OAAG,6CAAH,EAAkD,SAASC,IAAT,CAAcC,IAAd,EAAoB;AACpE,WAAKC,OAAL,CAAa,IAAb;AACAX;AACAY,iBAAW,YAAM;AACf,0BAAOlB,gBAAgBmB,MAAvB,EAA+BC,EAA/B,CAAkCC,EAAlC,CAAqCC,KAArC;AACAN;AACD,OAHD,EAGG,IAHH;AAID,KAPD;;AASAF,OAAG,sBAAH,EAA2B,YAAM;AAC/B,UAAMS,UAAUjB,gBAAhB;AACA,wBAAOiB,OAAP,EAAgBH,EAAhB,CAAmBI,IAAnB,CAAwBC,WAAxB,CAAoC,QAApC;AACD,KAHD;AAID,GAdD;;AAgBAZ,UAAQ,qCAAR,EAA+C,YAAM;AACnDN,eAAW,YAAM;AACfR,2BAAqBE,iBAAiB,EAAES,oBAAoB,CAAtB,EAAjB,CAArB;AACD,KAFD;;AAIAI,OAAG,iFAAH,EAAsF,SAASC,IAAT,CAAcC,IAAd,EAAoB;AACxG,WAAKC,OAAL,CAAa,IAAb;AACAX;AACAY,iBAAW,YAAM;AACf,0BAAOlB,gBAAgBmB,MAAvB,EAA+BC,EAA/B,CAAkCC,EAAlC,CAAqCK,IAArC;AACAV;AACD,OAHD,EAGG,IAHH;AAID,KAPD;;AASAF,OAAG,6FACC,+CADJ,EACqD,SAASC,IAAT,CAAcC,IAAd,EAAoB;AACvE,WAAKC,OAAL,CAAa,IAAb;AACAX;AACAY,iBAAW;AAAA,eAAMS,OAAOC,QAAP,CAAgBC,aAAhB,CAA8B,IAAIC,KAAJ,CAAU,OAAV,CAA9B,CAAN;AAAA,OAAX,EAAoE,IAApE;AACAZ,iBAAW,YAAM;AACf,0BAAOlB,gBAAgBmB,MAAvB,EAA+BC,EAA/B,CAAkCC,EAAlC,CAAqCC,KAArC;AACAN;AACD,OAHD,EAGG,IAHH;AAID,KATD;;AAWAF,OAAG,sBAAH,EAA2B,YAAM;AAC/B,UAAMS,UAAUjB,gBAAhB;AACA,wBAAOiB,OAAP,EAAgBH,EAAhB,CAAmBI,IAAnB,CAAwBC,WAAxB,CAAoC,QAApC;AACD,KAHD;AAID,GA7BD;AA8BD,CApED","file":"IdleTimeoutHandler.spec.js","sourcesContent":["import React from 'react';\nimport Sinon from 'sinon';\nimport { expect } from 'chai';\nimport { mount } from 'enzyme';\nimport userManager from './userManager';\nimport _Config from 'domain/Config';\n\ndescribe('<IdleTimeoutHandler />', () => {\n  let IdleTimeoutHandler;\n  let signoutRedirect;\n\n  // eslint-disable-next-line import/no-webpack-loader-syntax, global-require\n  const requireComponent = (Config) => require('inject?domain/Config&./userManager!./IdleTimeoutHandler')({\n    'domain/Config': _Config.merge(Config),\n    './userManager': userManager,\n  }).default;\n\n  const mountComponent = () => mount(<IdleTimeoutHandler><div id=\"inner\" /></IdleTimeoutHandler>);\n\n  beforeEach(() => {\n    signoutRedirect = Sinon.stub(userManager, 'signoutRedirect');\n    signoutRedirect.returns();\n    IdleTimeoutHandler = requireComponent({ autoSignOutTimeout: false });\n  });\n\n  afterEach(() => {\n    signoutRedirect.restore();\n  });\n\n  context('when autoSignOutTimeout is false', () => {\n    it('does not call userManager.signoutRedirect()', function test(done) {\n      this.timeout(5000);\n      mountComponent();\n      setTimeout(() => {\n        expect(signoutRedirect.called).to.be.false;\n        done();\n      }, 2000);\n    });\n\n    it('renders its children', () => {\n      const wrapper = mountComponent();\n      expect(wrapper).to.have.descendants('#inner');\n    });\n  });\n\n  context('when autoSignOutTimeout is a number', () => {\n    beforeEach(() => {\n      IdleTimeoutHandler = requireComponent({ autoSignOutTimeout: 2 });\n    });\n\n    it('calls userManager.signoutRedirect() after the seconds set in autoSignOutTimeout', function test(done) {\n      this.timeout(5000);\n      mountComponent();\n      setTimeout(() => {\n        expect(signoutRedirect.called).to.be.true;\n        done();\n      }, 2000);\n    });\n\n    it('does not call userManager.signoutRedirect() after the seconds set in autoSignOutTimeout ' +\n        'if there are some user interactions happening', function test(done) {\n      this.timeout(5000);\n      mountComponent();\n      setTimeout(() => window.document.dispatchEvent(new Event('click')), 1000);\n      setTimeout(() => {\n        expect(signoutRedirect.called).to.be.false;\n        done();\n      }, 2000);\n    });\n\n    it('renders its children', () => {\n      const wrapper = mountComponent();\n      expect(wrapper).to.have.descendants('#inner');\n    });\n  });\n});\n"]}