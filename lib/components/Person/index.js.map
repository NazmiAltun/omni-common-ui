{"version":3,"sources":["components/Person/index.jsx"],"names":["isPicture","c","type","Person","props","_setUp","PRODUCTION","_showWarnings","children","Children","toArray","_lines","filter","picture","find","_picture","className","Person_picture","Person_picture_vertical","vertical","pictures","lines","warn","personLinesClassName","Person_lines","Person_lines_vertical","propTypes","node","string","bool"],"mappings":";;;;;;;;;;AAAA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;AAEA,IAAMA,YAAY,SAAZA,SAAY,CAACC,CAAD;AAAA,SAAOA,EAAEC,IAAF,iCAA6BD,EAAEC,IAAF,2BAApC;AAAA,CAAlB;;IAEMC,M;;;AACJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA,gHACXA,KADW;;AAEjB,UAAKC,MAAL,CAAYD,KAAZ;AAFiB;AAGlB;;;;wCAEmBA,K,EAAO;AACzB,WAAKC,MAAL,CAAYD,KAAZ;AACD;;;2BAEMA,K,EAAO;AACZ,UAAI,CAAEE,UAAN,EAAkB;AAChB,aAAKC,aAAL,CAAmBH,KAAnB;AACD;;AAED,UAAMI,WAAW,gBAAMC,QAAN,CAAeC,OAAf,CAAuBN,MAAMI,QAA7B,CAAjB;AACA,WAAKG,MAAL,GAAcH,SAASI,MAAT,CAAgB,UAACX,CAAD;AAAA,eAAO,CAAED,UAAUC,CAAV,CAAT;AAAA,OAAhB,CAAd;;AAEA,UAAMY,UAAUL,SAASM,IAAT,CAAcd,SAAd,CAAhB;AACA,WAAKe,QAAL,GAAgB,8BAAC,OAAD,CAAS,IAAT,eAAkBF,QAAQT,KAA1B;AACZ,mBAAW,0BAAWS,QAAQT,KAAR,CAAcY,SAAzB,EAAoC,gBAAOC,cAA3C,sBACR,gBAAOC,uBADC,EACyBd,MAAMe,QAD/B,EADC,IAAhB;AAID;;;kCAEaf,K,EAAO;AACnB,UAAMI,WAAW,gBAAMC,QAAN,CAAeC,OAAf,CAAuBN,MAAMI,QAA7B,CAAjB;AACA,UAAMY,WAAWZ,SAASI,MAAT,CAAgBZ,SAAhB,CAAjB;AACA,UAAMqB,QAAQb,SAASI,MAAT,CAAgB,UAACX,CAAD;AAAA,eAAO,CAAED,UAAUC,CAAV,CAAT;AAAA,OAAhB,CAAd;;AAEA,UAAImB,YAAY,CAAhB,EAAmB;AACjB,sBAAIE,IAAJ,CAAS,+BAAT;AACD;;AAED,UAAIF,WAAW,CAAf,EAAkB;AAChB,sBAAIE,IAAJ,CAAS,0CAAT;AACD;;AAED,UAAID,SAAS,CAAb,EAAgB;AACd,sBAAIC,IAAJ,CAAS,6BAAT;AACD;AACF;;;6BAEQ;AACP,UAAMC,uBAAuB,KAAKnB,KAAL,CAAWe,QAAX,GAC3B,0BAAW,gBAAOK,YAAlB,EAAgC,gBAAOC,qBAAvC,CAD2B,GAE3B,gBAAOD,YAFT;AAGA,aAAO;AAAA;AAAA,UAAK,WAAW,0BAAW,gBAAOrB,MAAlB,EAA0B,KAAKC,KAAL,CAAWY,SAArC,CAAhB;AACJ,aAAKD,QADD;AAEL;AAAA;AAAA,YAAK,WAAWQ,oBAAhB;AAAuC,eAAKZ;AAA5C;AAFK,OAAP;AAID;;;;;;AAGHR,OAAOuB,SAAP,GAAmB;AACjBlB,YAAU,oBAAUmB,IADH;AAEjBX,aAAW,oBAAUY,MAFJ;AAGjBT,YAAU,oBAAUU;AAHH,CAAnB;;kBAMe1B,M","file":"index.js","sourcesContent":["import styles from './style.postcss';\n\nimport React, { PureComponent } from 'react';\nimport StudentPicture from 'components/StudentPicture';\nimport AdultPicture from 'components/AdultPicture';\nimport log from 'domain/log';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\n\nconst isPicture = (c) => c.type === StudentPicture || c.type === AdultPicture;\n\nclass Person extends PureComponent {\n  constructor(props) {\n    super(props);\n    this._setUp(props);\n  }\n\n  componentWillUpdate(props) {\n    this._setUp(props);\n  }\n\n  _setUp(props) {\n    if (! PRODUCTION) {\n      this._showWarnings(props);\n    }\n\n    const children = React.Children.toArray(props.children);\n    this._lines = children.filter((c) => ! isPicture(c));\n\n    const picture = children.find(isPicture);\n    this._picture = <picture.type {...picture.props}\n        className={classnames(picture.props.className, styles.Person_picture,\n        { [styles.Person_picture_vertical]: props.vertical }\n        )} />;\n  }\n\n  _showWarnings(props) {\n    const children = React.Children.toArray(props.children);\n    const pictures = children.filter(isPicture);\n    const lines = children.filter((c) => ! isPicture(c));\n\n    if (pictures <= 0) {\n      log.warn('No picture provided to Person');\n    }\n\n    if (pictures > 1) {\n      log.warn('More than one picture provided to Person');\n    }\n\n    if (lines <= 0) {\n      log.warn('No lines provided to Person');\n    }\n  }\n\n  render() {\n    const personLinesClassName = this.props.vertical ?\n      classnames(styles.Person_lines, styles.Person_lines_vertical) :\n      styles.Person_lines;\n    return <div className={classnames(styles.Person, this.props.className)}>\n      {this._picture}\n      <div className={personLinesClassName}>{this._lines}</div>\n    </div>;\n  }\n}\n\nPerson.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  vertical: PropTypes.bool,\n};\n\nexport default Person;\n"]}