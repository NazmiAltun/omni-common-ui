{"version":3,"sources":["components/Button/button.spec.jsx"],"names":["beforeEach","jest","clearAllTimers","test","expect","Type","toBe","wrapper","contains","find","toHaveLength","prop","toThrowError","primary","__primary","default","__default","length","__block","type","describe","onClick","fn","simulate","toHaveBeenCalled","useFakeTimers","runTimersToTime","__active","resolve","promise","Promise","r","reject","_","not","unmount","runOnlyPendingTimers","toThrow"],"mappings":"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","file":"button.spec.js","sourcesContent":["import styles from './style.postcss';\n\nimport React from 'react';\nimport { Link } from 'react-router';\nimport { shallow, mount } from 'enzyme';\nimport Button from './';\nimport { Type } from './type';\n\nbeforeEach(() => {\n  jest.clearAllTimers();\n});\n\ntest('contains Type object', () => {\n  expect(Button.Type).toBe(Type);\n});\n\ntest('renders its children', () => {\n  const wrapper = shallow(<Button><div id=\"innerContent\" /></Button>);\n  expect(wrapper.contains(<div id=\"innerContent\" />)).toBe(true);\n});\n\ntest('renders a Link when linkTo is provided', () => {\n  const wrapper = shallow(<Button linkTo=\"/\" />);\n  expect(wrapper.find(Link)).toHaveLength(1);\n});\n\ntest('will open link in a new Tab if newTab is provided', () => {\n  const wrapper = shallow(<Button linkHref=\"/\" newTab />);\n  expect(wrapper.prop('target')).toBe('_blank');\n});\n\ntest('thows error if invalid type is passed', () => {\n  expect(() => shallow(<Button type=\"faketype\" />)).toThrowError();\n});\n\ntest('applies proper styles if Type.primary is passed', () => {\n  const wrapper = shallow(<Button type={Type.primary} />);\n  expect(wrapper.find(`.${styles.__primary}`)).toHaveLength(1);\n});\n\ntest('applies proper styles if Type.default is passed', () => {\n  const wrapper = shallow(<Button type={Type.default} />);\n  expect(wrapper.find(`.${styles.__default}`)).toHaveLength(1);\n});\n\ntest('uses Type.default if no type is provided', () => {\n  const wrapper = shallow(<Button />);\n  expect(wrapper.find(`.${styles.__default}`).length).toBe(1);\n});\n\ntest('uses block styles if block property is provided', () => {\n  const wrapper = shallow(<Button block />);\n  expect(wrapper.find(`.${styles.__block}`).length).toBe(1);\n});\n\ntest('uses block styles on Link and itself if block propery is provided', () => {\n  const wrapper = shallow(<Button linkTo=\"/\" block />);\n  expect(wrapper.find(`.${styles.__block}`).length).toBe(2);\n});\n\ntest('applies custom attrs when provided', () => {\n  const wrapper = shallow(<Button attrs={{ type: 'submit' }} />);\n  expect(wrapper.find('button[type=\"submit\"]').length).toBe(1);\n});\n\ndescribe('when clicked', () => {\n  test('calls onClick', () => {\n    const onClick = jest.fn();\n    const wrapper = shallow(<Button onClick={onClick} />);\n    wrapper.simulate('click');\n    expect(onClick).toHaveBeenCalled();\n  });\n\n  test('sets the .__active class after 100ms by default', () => {\n    jest.useFakeTimers();\n\n    const wrapper = mount(<Button onClick={() => {}} />);\n    wrapper.simulate('click');\n    jest.runTimersToTime(100);\n\n    expect(wrapper.find(`.${styles.__active}`)).toHaveLength(1);\n  });\n\n  test('sets the .__active class after a custom amount of time if onClickActiveClassAddDelay is provided', () => {\n    jest.useFakeTimers();\n\n    const wrapper = mount(<Button onClick={() => {}} onClickActiveClassAddDelay={500} />);\n    wrapper.simulate('click');\n    jest.runTimersToTime(100);\n    expect(wrapper.find(`.${styles.__active}`)).toHaveLength(0);\n    jest.runTimersToTime(400);\n    expect(wrapper.find(`.${styles.__active}`)).toHaveLength(1);\n  });\n\n  test('removes the .__active class when onClick promise is resolved', async () => {\n    jest.useFakeTimers();\n\n    let resolve;\n    const promise = new Promise((r) => { resolve = r; });\n    const wrapper = mount(<Button onClick={() => promise} />);\n\n    wrapper.simulate('click');\n    jest.runTimersToTime(100);\n    expect(wrapper.find(`.${styles.__active}`)).toHaveLength(1);\n\n    resolve();\n    await promise;\n\n    expect(wrapper.find(`.${styles.__active}`)).toHaveLength(0);\n  });\n\n  test('removes the .__active class when onClick promise is rejected', async () => {\n    jest.useFakeTimers();\n\n    let reject;\n    const promise = new Promise((_, r) => { reject = r; });\n    const wrapper = mount(<Button onClick={() => promise} />);\n\n    wrapper.simulate('click');\n    jest.runTimersToTime(100);\n    expect(wrapper.find(`.${styles.__active}`)).toHaveLength(1);\n\n    reject();\n    try { await promise; } catch (e) { /**/ }\n\n    expect(wrapper.find(`.${styles.__active}`)).toHaveLength(0);\n  });\n\n  test('does not fail if onClick is not provided', () => {\n    const wrapper = shallow(<Button />);\n    expect(() => wrapper.simulate('click')).not.toThrowError();\n  });\n\n  test('does nothing if it is disabled', () => {\n    const onClick = jest.fn();\n    const wrapper = shallow(<Button onClick={onClick} disabled />);\n    wrapper.simulate('click');\n    expect(onClick).not.toHaveBeenCalled();\n  });\n\n  test('does not fail if the component is unmounted while active', () => {\n    const onClick = jest.fn();\n    const wrapper = mount(<Button onClick={onClick} onClickActiveClassAddDelay={0} />);\n    wrapper.simulate('click');\n    jest.runTimersToTime(100);\n    wrapper.unmount();\n    expect(() => jest.runOnlyPendingTimers(1000)).not.toThrow();\n  });\n});\n"]}