{"version":3,"sources":["components/Button/button.spec.jsx"],"names":["jest","mock","Link","props","beforeEach","clearAllTimers","test","expect","Type","toBe","wrapper","contains","toThrowError","primary","find","__primary","toHaveLength","default","__default","length","__block","type","describe","testButtonClick","prop","linkHref","linkTo","onClick","fn","simulate","toHaveBeenCalled","not","runTimersToTime","unmount","runOnlyPendingTimers","toThrow","useFakeTimers","__active","resolve","promise","Promise","r","reject","_"],"mappings":"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","file":"button.spec.js","sourcesContent":["import styles from './style.postcss';\n\nimport React from 'react';\nimport { Link } from 'react-router';\nimport { shallow, mount } from 'enzyme';\nimport Button from './';\nimport { Type } from './type';\n\njest.mock('react-router', () => ({ Link: (props) => <div {...props} /> }));\n\nbeforeEach(() => {\n  jest.clearAllTimers();\n});\n\ntest('contains Type object', () => {\n  expect(Button.Type).toBe(Type);\n});\n\ntest('renders its children', () => {\n  const wrapper = shallow(<Button><div id=\"innerContent\" /></Button>);\n  expect(wrapper.contains(<div id=\"innerContent\" />)).toBe(true);\n});\n\ntest('thows error if invalid type is passed', () => {\n  expect(() => shallow(<Button type=\"faketype\" />)).toThrowError();\n});\n\ntest('applies proper styles if Type.primary is passed', () => {\n  const wrapper = shallow(<Button type={Type.primary} />);\n  expect(wrapper.find(`.${styles.__primary}`)).toHaveLength(1);\n});\n\ntest('applies proper styles if Type.default is passed', () => {\n  const wrapper = shallow(<Button type={Type.default} />);\n  expect(wrapper.find(`.${styles.__default}`)).toHaveLength(1);\n});\n\ntest('uses Type.default if no type is provided', () => {\n  const wrapper = shallow(<Button />);\n  expect(wrapper.find(`.${styles.__default}`).length).toBe(1);\n});\n\ntest('uses block styles if block property is provided', () => {\n  const wrapper = shallow(<Button block />);\n  expect(wrapper.find(`.${styles.__block}`).length).toBe(1);\n});\n\ntest('applies custom attrs when provided', () => {\n  const wrapper = shallow(<Button attrs={{ type: 'submit' }} />);\n  expect(wrapper.find('button[type=\"submit\"]').length).toBe(1);\n});\n\ndescribe('when it should be rendered as a <button />', () => {\n  testButtonClick();\n});\n\ndescribe('when it should be rendered as an <a />', () => {\n  test('renders an <a> when linkTo is provided but disabled=true', () => {\n    const wrapper = shallow(<Button linkTo=\"/\" disabled />);\n    expect(wrapper.find(Link)).toHaveLength(0);\n    expect(wrapper.find('a')).toHaveLength(1);\n  });\n\n  test('renders an <a> when linkHref is provided', () => {\n    const wrapper = shallow(<Button linkHref=\"/\" />);\n    expect(wrapper.find(Link)).toHaveLength(0);\n    expect(wrapper.find('a')).toHaveLength(1);\n  });\n\n  test('will open link in a new Tab if newTab is provided', () => {\n    const wrapper = shallow(<Button linkHref=\"/\" newTab />);\n    expect(wrapper.prop('target')).toBe('_blank');\n  });\n\n  testButtonClick({ linkHref: '/' });\n});\n\ndescribe('when it should be rendered as a <Link />', () => {\n  test('renders a Link when linkTo is provided', () => {\n    const wrapper = shallow(<Button linkTo=\"/\" />);\n    expect(wrapper.find(Link)).toHaveLength(1);\n  });\n\n  test('uses block styles on Link and itself if block propery is provided', () => {\n    const wrapper = shallow(<Button linkTo=\"/\" block />);\n    expect(wrapper.find(`.${styles.__block}`).length).toBe(2);\n  });\n\n  testButtonClick({ linkTo: '/' });\n});\n\nfunction testButtonClick(props = {}) {\n  describe('when clicked', () => {\n    test('calls onClick', () => {\n      const onClick = jest.fn();\n      const wrapper = shallow(<Button {...props} onClick={onClick} />);\n      wrapper.simulate('click');\n      expect(onClick).toHaveBeenCalled();\n    });\n\n    test('does not fail if onClick is not provided', () => {\n      const wrapper = shallow(<Button {...props} />);\n      expect(() => wrapper.simulate('click')).not.toThrowError();\n    });\n\n    test('does nothing if it is disabled', () => {\n      const onClick = jest.fn();\n      const wrapper = shallow(<Button {...props} onClick={onClick} disabled />);\n      wrapper.simulate('click');\n      expect(onClick).not.toHaveBeenCalled();\n    });\n\n    test('does not fail if the component is unmounted while active', () => {\n      const onClick = jest.fn();\n      const wrapper = mount(<Button {...props} onClick={onClick} onClickActiveClassAddDelay={0} />);\n      wrapper.simulate('click');\n      jest.runTimersToTime(100);\n      wrapper.unmount();\n      expect(() => jest.runOnlyPendingTimers(1000)).not.toThrow();\n    });\n\n    test('sets the .__active class after 100ms by default', () => {\n      jest.useFakeTimers();\n\n      const wrapper = mount(<Button {...props} onClick={() => {}} />);\n      wrapper.simulate('click');\n      jest.runTimersToTime(100);\n\n      expect(wrapper.find(`.${styles.__active}`)).toHaveLength(1);\n    });\n\n    test('sets the .__active class after a custom amount of time if onClickActiveClassAddDelay is provided', () => {\n      jest.useFakeTimers();\n\n      const wrapper = mount(<Button {...props}\n          onClick={() => {}}\n          onClickActiveClassAddDelay={500} />);\n      wrapper.simulate('click');\n      jest.runTimersToTime(100);\n      expect(wrapper.find(`.${styles.__active}`)).toHaveLength(0);\n      jest.runTimersToTime(400);\n      expect(wrapper.find(`.${styles.__active}`)).toHaveLength(1);\n    });\n\n    test('removes the .__active class when onClick promise is resolved', async () => {\n      jest.useFakeTimers();\n\n      let resolve;\n      const promise = new Promise((r) => { resolve = r; });\n      const wrapper = mount(<Button {...props} onClick={() => promise} />);\n\n      wrapper.simulate('click');\n      jest.runTimersToTime(100);\n      expect(wrapper.find(`.${styles.__active}`)).toHaveLength(1);\n\n      resolve();\n      await promise;\n\n      expect(wrapper.find(`.${styles.__active}`)).toHaveLength(0);\n    });\n\n    test('removes the .__active class when onClick promise is rejected', async () => {\n      jest.useFakeTimers();\n\n      let reject;\n      const promise = new Promise((_, r) => { reject = r; });\n      const wrapper = mount(<Button {...props} onClick={() => promise} />);\n\n      wrapper.simulate('click');\n      jest.runTimersToTime(100);\n      expect(wrapper.find(`.${styles.__active}`)).toHaveLength(1);\n\n      reject();\n      try { await promise; } catch (e) { /**/ }\n\n      expect(wrapper.find(`.${styles.__active}`)).toHaveLength(0);\n    });\n  });\n}\n"]}