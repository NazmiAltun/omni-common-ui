{"version":3,"sources":["components/Button/button.jsx"],"names":["Button","props","_handleButtonClick","bind","e","disabled","onClick","ret","function","_setActiveClassOnClick","onClickActiveClassAddDelay","onClickActiveClassRemoveDelay","setTimeout","_node","classList","add","__active","Promise","_unsetActiveClassIfNonActive","number","active","remove","type","modeClasses","assignOnClick","classes","className","undefined","c","attrs","children","default","__block","block","__autoWidth","autoWidth","existy","linkHref","linkTo","ButtonLink","newTab","_renderButton","propTypes","func","string","bool","node","shape"],"mappings":"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","file":"button.js","sourcesContent":["import styles from './style.postcss';\n\nimport React, { PureComponent } from 'react';\nimport classnames from 'classnames';\nimport { Link } from 'react-router';\nimport { Type, validateType } from './type';\nimport is from 'is_js';\nimport PropTypes from 'prop-types';\n\nclass Button extends PureComponent {\n  constructor(props) {\n    super(props);\n    this._handleButtonClick = this._handleButtonClick.bind(this);\n  }\n\n  _handleButtonClick(e) {\n    if (this.props.disabled) return;\n    const { onClick } = this.props;\n    const ret = is.function(onClick) && onClick(e);\n    this._setActiveClassOnClick(ret);\n  }\n\n  _setActiveClassOnClick(ret) {\n    const { onClickActiveClassAddDelay, onClickActiveClassRemoveDelay } = this.props;\n\n    // defer this - we don't want to show an active state if something happens immediately\n    setTimeout(async () => {\n      if (! this._node) return;\n      this._node.classList.add(styles.__active);\n      if (ret instanceof Promise) {\n        try { await ret; } catch (e) { /**/ }\n        this._unsetActiveClassIfNonActive();\n      } else {\n        setTimeout(() => {\n          this._unsetActiveClassIfNonActive();\n        }, is.number(onClickActiveClassRemoveDelay) ? onClickActiveClassRemoveDelay : 1000);\n      }\n    }, is.number(onClickActiveClassAddDelay) ? onClickActiveClassAddDelay : 100);\n  }\n\n  _unsetActiveClassIfNonActive() {\n    if (this.props.active) return;\n    if (! this._node) return;\n    this._node.classList.remove(styles.__active);\n  }\n\n  _renderButton(type, modeClasses, assignOnClick = true) {\n    const classes = classnames(type, modeClasses, this.props.className);\n\n    return <button className={classes}\n        disabled={this.props.disabled}\n        onClick={assignOnClick ? this._handleButtonClick : undefined}\n        ref={(c) => { this._node = c; }}\n        {...this.props.attrs || {}}>\n      {this.props.children}\n    </button>;\n  }\n\n  render() {\n    const props = this.props;\n    const type = props.type || Type.default;\n\n    validateType(type);\n\n    const modeClasses = {\n      [styles.__block]: !! props.block,\n      [styles.__autoWidth]: !! props.autoWidth,\n      [styles.__active]: !! props.active,\n    };\n\n    // case: link to URL via `linkHref` OR disabled with `linkTo`\n    if (is.existy(props.linkHref) || (is.existy(props.linkTo) && props.disabled)) {\n      // eslint-disable-next-line no-script-url\n      return <a href={! props.disabled ? props.linkHref : 'javascript:void(0)'}\n          className={classnames(styles.ButtonLink, modeClasses, props.className)}\n          target={props.newTab ? '_blank' : undefined}\n          onClick={this._handleButtonClick}>\n        {this._renderButton(type, modeClasses, false)}\n      </a>;\n    }\n\n    // case: link to route via `linkTo`\n    if (is.existy(props.linkTo)) {\n      return <Link to={props.linkTo}\n          draggable={false}\n          className={classnames(styles.ButtonLink, modeClasses, props.className)}\n          onClick={this._handleButtonClick}>\n        {this._renderButton(type, modeClasses, false)}\n      </Link>;\n    }\n\n    return this._renderButton(type, modeClasses);\n  }\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  type: PropTypes.string,\n  disabled: PropTypes.bool,\n  newTab: PropTypes.bool,\n  children: PropTypes.node,\n  linkTo: PropTypes.string,\n  linkHref: PropTypes.string,\n  block: PropTypes.bool,\n  autoWidth: PropTypes.bool,\n  active: PropTypes.bool,\n  className: PropTypes.string,\n  attrs: PropTypes.shape({\n    type: PropTypes.string,\n  }),\n  onClickActiveClassAddDelay: PropTypes.number,  // default: 100ms\n  onClickActiveClassRemoveDelay: PropTypes.number,  // default: 1000ms\n};\n\nexport default Button;\n"]}