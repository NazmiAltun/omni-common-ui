{"version":3,"sources":["components/App/index.jsx"],"names":["mapStateToProps","App","props","state","sidebarExpanded","_setPageTitle","evt","preventDefault","stopPropagation","setState","_breadcrumbs","buildWithProps","visibleBreadcrumbCount","filter","bc","hidden","length","document","title","get","reduce","result","item","index","label","user","expired","PRODUCTION","e","_onHamburgerClick","App_wrap","_expandSidebar","_collapseSidebar","App_content","App_content_auxiliary","App_content_auxiliary_breadcrumbs","App_content_auxiliary_historyLink","App_content_wrap","children","propTypes","shape","bool","node"],"mappings":"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","file":"index.js","sourcesContent":["import styles from './style.postcss';\n\nimport React, { PureComponent } from 'react';\nimport Header from 'containers/Header';\nimport Sidebar from 'containers/Sidebar';\nimport Footer from 'components/Footer';\nimport classnames from 'classnames';\nimport testClass from 'domain/testClass';\nimport Breadcrumbs from 'components/Breadcrumbs';\nimport HistoryLink from 'components/HistoryLink';\nimport connect from 'domain/connect';\nimport PerformanceProfiler from 'components/PerformanceProfiler';\nimport Config from 'domain/Config';\nimport BreadcrumbsBuilder from 'domain/BreadcrumbsBuilder';\nimport PropTypes from 'prop-types';\n\nclass App extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { sidebarExpanded: false };\n  }\n\n  componentDidMount() {\n    this._setPageTitle(this.props);\n  }\n\n  componentWillUpdate(props) {\n    this._setPageTitle(props);\n  }\n\n  _collapseSidebar(evt) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.setState({ sidebarExpanded: false });\n  }\n\n  _expandSidebar(evt) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.setState({ sidebarExpanded: true });\n  }\n\n  _onHamburgerClick(evt) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.setState(({ sidebarExpanded }) => ({ sidebarExpanded: ! sidebarExpanded }));\n  }\n\n  _setPageTitle(props) {\n    this._breadcrumbs = BreadcrumbsBuilder.buildWithProps(props);\n    const visibleBreadcrumbCount =\n        this._breadcrumbs && this._breadcrumbs.filter((bc) => ! bc.hidden).length;\n    if (! this._breadcrumbs || visibleBreadcrumbCount <= 0) {\n      document.title = Config.get('displayTitle');\n    } else {\n      document.title = this._breadcrumbs.filter((bc) => ! bc.hidden)\n      .reduce((result, item, index) =>\n          `${result}${index !== 0 ? ' / ' : ''}${item.label}`, `${Config.get('displayTitle')} - `);\n    }\n  }\n\n  render() {\n    const { user } = this.props;\n    if (! user || user.expired) return null;\n\n    return <div className={classnames(styles.App, testClass('app'))}>\n      {\n        ! PRODUCTION && Config.get('performanceProfiler') === true &&\n        <PerformanceProfiler />\n      }\n      <Header {...this.props} onHamburgerClick={(e) => this._onHamburgerClick(e)} />\n      <div className={styles.App_wrap}>\n        <Sidebar {...this.props}\n            expanded={this.state.sidebarExpanded}\n            onExpand={(e) => this._expandSidebar(e)}\n            onCollapse={(e) => this._collapseSidebar(e)} />\n        <div className={styles.App_content}>\n          <div className={styles.App_content_auxiliary}>\n            {\n              this._breadcrumbs &&\n              <Breadcrumbs className={styles.App_content_auxiliary_breadcrumbs}\n                  items={this._breadcrumbs}\n                  singleLineMode />\n            }\n            <HistoryLink className={styles.App_content_auxiliary_historyLink} {...this.props} />\n          </div>\n          <div className={styles.App_content_wrap}>{this.props.children}</div>\n        </div>\n      </div>\n      <Footer />\n    </div>;\n  }\n}\n\nApp.propTypes = {\n  user: PropTypes.shape({\n    expired: PropTypes.bool,\n  }),\n  children: PropTypes.node,\n};\n\nexport function mapStateToProps(state) {\n  return { user: state.get('singleSignOn').get('user') };\n}\n\nexport default connect(mapStateToProps)(App);\n"]}