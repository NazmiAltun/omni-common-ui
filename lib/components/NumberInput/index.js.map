{"version":3,"sources":["components/NumberInput/index.jsx"],"names":["NumberInput","acceptedString","setState","value","transferToNumber","props","undefined","defaultValue","min","max","step","disabled","unwritable","nextProps","target","number","Number","toFixed","test","state","not","applyChange","e","onChange","NumberInputContainer","labelName","NumberInputName","className","customStyle","upArrow","upArrowClickHandler","downArrow","downArrowClickHandler","valueBox","valueChangeHandler","propTypes","oneOfType","string","func","bool","object"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport styles from './style.postcss';\nimport is from 'is_js';\nimport classnames from 'classnames';\nimport Icon from 'components/Icon';\nimport PropTypes from 'prop-types';\n\nexport default class NumberInput extends Component {\n  componentWillMount() {\n    this.acceptedString = /^[0-9]+$/;\n    this.setState({\n      value: this.transferToNumber(this.props.value === undefined ?\n          this.props.defaultValue :\n          this.props.value, ''),\n      min: this.transferToNumber(this.props.min),\n      max: this.transferToNumber(this.props.max),\n      step: this.transferToNumber(this.props.step, 1),\n      disabled: this.props.disabled,\n      unwritable: this.props.unwritable,\n    });\n  }\n\n  componentWillUpdate(nextProps) {\n    if (this.props.value === nextProps.value &&\n        this.props.min === nextProps.min &&\n        this.props.max === nextProps.max &&\n        this.props.step === nextProps.step &&\n        this.props.disabled === nextProps.disabled &&\n        this.props.unwritable === nextProps.unwritable) {\n      return;\n    }\n    this.setState({\n      value: this.transferToNumber(nextProps.value === undefined ?\n          nextProps.defaultValue :\n          nextProps.value),\n      min: this.transferToNumber(nextProps.min),\n      max: this.transferToNumber(nextProps.max),\n      step: this.transferToNumber(nextProps.step, 1),\n      disabled: nextProps.disabled,\n      unwritable: nextProps.unwritable,\n    });\n  }\n\n  transferToNumber(target, defaultValue) {\n    if (is.number(target)) {\n      return Number(target.toFixed(0));\n    }\n    if (this.acceptedString.test(target)) {\n      return Number(target);\n    }\n    return defaultValue;\n  }\n\n  upArrowClickHandler() {\n    if (this.state.value === undefined) {\n      if (is.not.undefined(this.state.min)) {\n        this.applyChange(this.state.min);\n      } else {\n        this.applyChange(this.state.step || 1);\n      }\n      return;\n    }\n\n    if (is.undefined(this.state.max) ||\n        this.state.value + this.state.step <= this.state.max) {\n      this.applyChange(this.state.value + this.state.step);\n    }\n  }\n\n  downArrowClickHandler() {\n    if (this.state.value === undefined) {\n      if (is.not.undefined(this.state.min)) {\n        this.applyChange(this.state.min);\n      } else {\n        this.applyChange(- this.state.step || - 1);\n      }\n      return;\n    }\n\n    if (is.undefined(this.state.min) ||\n        this.state.value - this.state.step >= this.state.min) {\n      this.applyChange(this.state.value - this.state.step);\n    }\n  }\n\n  valueChangeHandler(e) {\n    if (e.target.value === '') {\n      this.applyChange(e.target.value);\n    }\n\n    if (this.acceptedString.test(e.target.value)) {\n      this.setState({ value: e.target.value });\n\n      if ((is.undefined(this.state.min) ||\n          Number(e.target.value, 10) >= this.state.min) &&\n          (is.undefined(this.state.max) ||\n          Number(e.target.value, 10) <= this.state.max)) {\n        this.applyChange(Number(e.target.value, 10));\n      }\n\n      if (Number(e.target.value, 10) < this.state.min) {\n        this.applyChange(Number(this.state.min, 10));\n      }\n\n      if (Number(e.target.value, 10) > this.state.max) {\n        this.applyChange(Number(this.state.max, 10));\n      }\n    }\n  }\n\n  applyChange(value) {\n    this.setState({ value });\n    if (this.props.onChange) {\n      if (value === '') {\n        this.props.onChange({ target: {} });\n      } else {\n        this.props.onChange({ target: { value } });\n      }\n    }\n  }\n\n  render() {\n    return <div className={styles.NumberInputContainer}>\n      {this.props.labelName ?\n        <span className={styles.NumberInputName}>\n          {this.props.labelName}\n        </span> :\n        ''}\n      <div className={classnames(styles.NumberInput, this.props.className)}\n          style={this.props.customStyle} >\n        {\n          ! this.props.disabled &&\n          <div className={styles.upArrow} onClick={() => this.upArrowClickHandler()}>\n            <Icon id=\"chevron-small-up\" />\n          </div>\n        }\n        {\n          ! this.props.disabled &&\n          <div className={styles.downArrow} onClick={() => this.downArrowClickHandler()}>\n            <Icon id=\"chevron-small-down\" />\n          </div>\n        }\n        <input className={styles.valueBox}\n            type=\"text\"\n            value={this.state.value}\n            disabled={this.state.unwritable || this.state.disabled}\n            onChange={(e) => this.valueChangeHandler(e)} />\n      </div>\n    </div>;\n  }\n}\n\nNumberInput.propTypes = {\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  defaultValue: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  min: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  max: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  step: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  onChange: PropTypes.func,\n  disabled: PropTypes.bool,\n  unwritable: PropTypes.bool,\n  className: PropTypes.string,\n  labelName: PropTypes.string,\n  customStyle: PropTypes.object,\n};\n"]}