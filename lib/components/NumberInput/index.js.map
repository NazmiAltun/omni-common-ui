{"version":3,"sources":["components/NumberInput/index.jsx"],"names":["REG_EXP_ACCEPTED_CHARS","NumberInput","props","state","focused","_parseProps","_onUpArrowClicked","bind","_onDownArrowClicked","_onValueChanged","_onFocus","_onBlur","_refToInput","nextProps","_value","_parseNumber","value","_defaultValue","defaultValue","_min","min","_max","max","_step","step","target","number","Number","toFixed","test","_setNewValue","_focusOnInput","_input","focus","newValue","empty","_sendCallbackWithNewValue","numberValue","undefined","function","onChange","setState","c","classes","NumberInput_inputContainer","className","__focused","labelName","NumberInput_label","NumberInput_inputContainer_input","readonly","disabled","NumberInput_arrowsContainer","NumberInput_arrow","propTypes","oneOfType","string","func","isRequired","bool"],"mappings":"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","file":"index.js","sourcesContent":["import styles from './style.postcss';\n\nimport React, { PureComponent } from 'react';\nimport is from 'is_js';\nimport classnames from 'classnames';\nimport Icon from 'components/Icon';\nimport PropTypes from 'prop-types';\n\nconst REG_EXP_ACCEPTED_CHARS = /^[0-9]+$/;\n\nexport default class NumberInput extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { focused: false };\n    this._parseProps(props);\n    this._onUpArrowClicked = this._onUpArrowClicked.bind(this);\n    this._onDownArrowClicked = this._onDownArrowClicked.bind(this);\n    this._onValueChanged = this._onValueChanged.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onBlur = this._onBlur.bind(this);\n    this._refToInput = this._refToInput.bind(this);\n  }\n\n  componentWillUpdate(nextProps) {\n    this._parseProps(nextProps);\n  }\n\n  _parseProps(props) {\n    this._value = this._parseNumber(props.value);\n    this._defaultValue = this._parseNumber(props.defaultValue);\n    this._min = this._parseNumber(props.min);\n    this._max = this._parseNumber(props.max);\n    this._step = this._parseNumber(props.step, 1);\n  }\n\n  _parseNumber(target, defaultValue) {\n    if (is.number(target)) {\n      return Number(target.toFixed(0));\n    }\n\n    if (REG_EXP_ACCEPTED_CHARS.test(target)) {\n      return Number(target, 10);\n    }\n\n    return defaultValue;\n  }\n\n  _onUpArrowClicked() {\n    this._setNewValue((this._value || this._defaultValue) + 1);\n    this._focusOnInput();\n  }\n\n  _onDownArrowClicked() {\n    this._setNewValue((this._value || this._defaultValue) - 1);\n    this._focusOnInput();\n  }\n\n  _setNewValue(value) {\n    this._onValueChanged({ target: { value } });\n  }\n\n  _focusOnInput() {\n    this._input.focus();\n  }\n\n  _onValueChanged({ target: { value: newValue } }) {\n    if (is.empty(newValue)) {\n      return this._sendCallbackWithNewValue(null);\n    }\n\n    if (! REG_EXP_ACCEPTED_CHARS.test(newValue)) {\n      return;\n    }\n\n    const numberValue = Number(newValue, 10);\n    if ((is.undefined(this._min) || numberValue >= this._min) &&\n        (is.undefined(this._max) || numberValue <= this._max)) {\n      return this._sendCallbackWithNewValue(numberValue);\n    }\n\n    if (numberValue < this._min) {\n      return this._sendCallbackWithNewValue(this._min);\n    }\n\n    if (numberValue > this._max) {\n      return this._sendCallbackWithNewValue(this._max);\n    }\n  }\n\n  _sendCallbackWithNewValue(value) {\n    if (is.function(this.props.onChange)) {\n      this.props.onChange(value);\n    }\n  }\n\n  _onFocus() {\n    this.setState({ focused: true });\n  }\n\n  _onBlur() {\n    this.setState({ focused: false });\n  }\n\n  _refToInput(c) {\n    this._input = c;\n  }\n\n  render() {\n    const classes = classnames(styles.NumberInput_inputContainer,\n        this.props.className,\n        { [styles.__focused]: this.state.focused });\n    return <div className={styles.NumberInput}>\n      {\n        this.props.labelName &&\n        <span className={styles.NumberInput_label}>\n          {this.props.labelName}\n        </span>\n      }\n      <div className={classes}>\n        <input className={styles.NumberInput_inputContainer_input}\n            type=\"text\"\n            value={this._value || this._defaultValue}\n            disabled={this.props.readonly || this.props.disabled}\n            onChange={this._onValueChanged}\n            onFocus={this._onFocus}\n            onBlur={this._onBlur}\n            ref={this._refToInput} />\n        {\n          ! this.props.disabled &&\n          <div className={styles.NumberInput_arrowsContainer}>\n            <div className={styles.NumberInput_arrow} onClick={this._onUpArrowClicked}>\n              <Icon id=\"chevron-small-up\" />\n            </div>\n            <div className={styles.NumberInput_arrow} onClick={this._onDownArrowClicked}>\n              <Icon id=\"chevron-small-down\" />\n            </div>\n          </div>\n        }\n      </div>\n    </div>;\n  }\n}\n\nNumberInput.propTypes = {\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  defaultValue: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  min: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  max: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  step: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  readonly: PropTypes.bool,\n  className: PropTypes.string,\n  labelName: PropTypes.string,\n};\n"]}